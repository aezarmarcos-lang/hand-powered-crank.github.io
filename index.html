<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Hand crank power generator â€” student project: how it works, components, and uses." />
    <title>Mechanical-Powered Stepper</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
      /* -------------------------
         Theme variables & reset
         ------------------------- */
      :root{
        --bg-img: url('nagal-feet-pics/RPG.jpg');
        --accent: #9be7ff;
        --accent-strong: #19a6ff;
        --panel-bg: rgba(4,8,12,0.55);
        --panel-bg-2: rgba(18,24,30,0.55);
        --text: #dbeeff;
        --muted-text: #9fb6d1;
        --card-border: rgba(120,160,255,0.06);
        --glass: rgba(0,0,0,0.55);
      }

      /* Base */
      html,body{height:100%;margin:0;padding:0;font-family:Arial, Helvetica, sans-serif;background:#071428;color:var(--text)}
      /* Background image + subtle overlay (put only once, not duplicated inline) */
      body{
        background-image: var(--bg-img);
        background-position: center;
        background-size: cover;
        background-attachment: fixed;
      }
      body::before{
        content:'';
        position:fixed;
        inset:0;
        background:linear-gradient(rgba(0,0,0,0.32), rgba(0,0,0,0.48));
        pointer-events:none;
        z-index:0;
      }

      /* -------------------------
         Layout & main panel
         ------------------------- */
      .page{
        max-width:980px;
        margin:34px auto;
        padding:20px;
        background: linear-gradient(180deg, rgba(4,8,12,0.55), rgba(18,24,30,0.55));
        border-radius:12px;
        border:1px solid var(--card-border);
        position:relative;
        z-index:1;
        color:var(--text);
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        backdrop-filter: blur(2px);
      }

      /* HUD/header */
      .hud{
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding:8px 12px;
        background:rgba(0,0,0,0.14);
        border:1px solid rgba(255,255,255,0.04);
        border-radius:8px;
        margin-bottom:14px;
        font-family:'Orbitron',sans-serif;
        color:var(--accent);
        text-shadow:0 0 4px rgba(0,200,255,0.12);
        font-size:13px;
      }

      header{text-align:center;padding-bottom:6px}
      .title{
        font-family:'Press Start 2P',monospace;
        font-size:20px;
        color:#8efcff;
        text-shadow:0 2px 14px rgba(0,230,255,0.08),0 0 6px rgba(0,120,255,0.06);
        margin:6px 0;
      }

      /* Section panels */
      .section{
        margin-top:16px;
        padding:14px;
        border-radius:8px;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
        border:1px solid rgba(255,255,255,0.03);
        box-shadow: 0 6px 18px rgba(0,0,0,0.35) inset;
      }
      h2{
        font-family:'Orbitron',sans-serif;
        font-size:16px;
        color:#a6f0ff;
        margin:6px 0 10px 0;
        text-align:left;
      }

      /* Readability improvements */
      .content {
        max-width:760px;  /* comfortable reading width */
        margin: 0 auto;
      }

      p{
        line-height:1.75;            /* increased breathing room */
        margin:10px 0 18px 0;
        color:#d0e9ff;               /* softer color */
        font-size:16.8px;           /* slightly larger */
        text-shadow: 0 0 3px rgba(0,0,0,0.45); /* subtle for contrast */
        text-align:left;
      }

      ul{
        line-height:1.7;
        margin:6px 0 16px 0;
        padding-left:20px;
        color:#d0e9ff;
      }
      li{margin:8px 0}

      /* Buttons / CTAs */
      .controls{display:flex;gap:10px;justify-content:center;margin-top:14px}
      .btn{
        background: linear-gradient(180deg,var(--accent-strong),#0064b3);
        color:#fff;
        border:0;
        padding:10px 18px;
        border-radius:8px;
        font-weight:700;
        box-shadow:0 6px 20px rgba(0,90,160,0.28);
        cursor:pointer;
        font-family:'Orbitron',sans-serif;
        transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
      }
      .btn:active{ transform: translateY(1px) }
      .btn.secondary{
        background: linear-gradient(180deg,#222,#111);
        color:var(--accent);
        border:1px solid rgba(120,200,255,0.08);
        box-shadow:none;
      }

      /* Floating side button */
      .side-toggle{
        position:fixed;
        right:12px;
        bottom:12px;
        z-index:2200;
        background:linear-gradient(180deg,#0ea5ff,#0070b3);
        color:#fff;
        border-radius:28px;
        padding:10px 16px;
        box-shadow:0 8px 24px rgba(0,0,0,0.5);
        cursor:pointer;
        border:0;
        font-family:'Orbitron',sans-serif;
        text-decoration:none;
        transition: transform .16s ease, box-shadow .16s ease;
      }
      .side-toggle:hover{ transform: translateY(-3px) }

      /* Side panel (kept but not used in this version) */
      .side-panel{position:fixed;right:0;top:0;height:100%;width:340px;max-width:92vw;background:linear-gradient(180deg,rgba(6,10,14,0.96),rgba(20,28,36,0.98));box-shadow:-12px 0 40px rgba(0,0,0,0.6);transform:translateX(100%);transition:transform .28s ease;z-index:2199;padding:18px;overflow:auto;border-left:1px solid var(--card-border)}
      .side-panel.open{transform:translateX(0)}
      .side-panel .close{position:absolute;left:10px;top:10px;background:transparent;border:0;color:var(--accent);font-size:16px;cursor:pointer}
      .side-panel h3{font-family:'Orbitron',sans-serif;color:var(--accent);margin-top:28px}

      /* Circular sound toggle button */
      #soundToggle{
        position: fixed;
        top: 15px;
        left: 15px;
        width: 55px;
        height: 55px;
        border-radius: 50%;
        border: 2px solid rgba(255,255,255,0.35);
        background: var(--glass);
        backdrop-filter: blur(6px);
        color: var(--accent);
        font-size: 22px;
        cursor: pointer;
        z-index:5000;
        display:flex;
        align-items:center;
        justify-content:center;
        transition: transform .14s ease, background .14s;
      }
      #soundToggle:hover{ transform: scale(1.08); background: rgba(0,0,0,0.75) }
      #soundToggle[aria-pressed="true"]{ box-shadow: 0 6px 18px rgba(0,150,255,0.14) }

      footer{font-size:13px;color:var(--muted-text);text-align:center;margin-top:20px}

      /* Accessibility: focus styles */
      button:focus, a:focus{ outline: 3px solid rgba(155,231,255,0.18); outline-offset: 3px; }

      /* Responsive */
      @media (max-width:720px){
        .title{font-size:14px;padding:6px}
        p{margin:10px;font-size:16px}
        .page{margin:16px;padding:14px}
        #soundToggle{width:48px;height:48px;font-size:18px;top:10px;left:10px}
      }
    </style>
  </head>

  <body>
    <!-- Background music: start muted for autoplay compatibility -->
    <audio id="bgMusic" loop muted playsinline>
      <source src="background-music.mp3" type="audio/mpeg" />
      <!-- fallback note -->
    </audio>

    <!-- Sound toggle (aria, keyboard accessible) -->
    <button id="soundToggle" aria-pressed="false" aria-label="Toggle background music">ðŸ”‡</button>

    <div class="page" role="main">
      <div class="hud" role="status" aria-live="polite">
        <div class="left" data-en="LEVEL 01 â€¢ XP 012/100" data-ja="ãƒ¬ãƒ™ãƒ« 01 â€¢ ã‚±ã‚¤ã‚±ãƒ³ãƒ 012/100">LEVEL 01 â€¢ XP 012/100</div>
        <div class="right" data-en="STATUS: ONLINE â€¢ RANK: NOVICE" data-ja="ã‚¸ãƒ§ã‚¦ã‚¿ã‚¤: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ â€¢ ãƒ©ãƒ³ã‚¯: ã‚·ãƒ§ã‚­ãƒ¥ã‚¦">STATUS: ONLINE â€¢ RANK: NOVICE</div>
      </div>

      <header>
        <div class="title" data-en="Your Potential with the Hand Crank Power Generator" data-ja="ãƒ†ãƒžãƒ¯ã‚·ãƒãƒ„ãƒ‡ãƒ³ã‚­ãƒŽã‚«ãƒŽã‚¦ã‚»ã‚¤">Your Potential with the Hand Crank Power Generator</div>
      </header>

      <div class="content">
        <p data-en="A hand crank power generator is a small device that creates electricity by using human mechanical energy. When you turn the crank, the internal mechanism, which is either a dynamo or a DC generator, turns that motion into electrical energy. This demonstrates how people can generate power without fuel or electricity. It is useful for emergencies and for learning about renewable energy." data-ja="æ‰‹å›žã—ç™ºé›»æ©Ÿã¯ã€äººé–“ã®æ©Ÿæ¢°çš„ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’åˆ©ç”¨ã—ã¦é›»æ°—ã‚’ä½œã‚Šå‡ºã™å°åž‹è£…ç½®ã§ã™ã€‚ã‚¯ãƒ©ãƒ³ã‚¯ã‚’å›žã™ã¨ã€å†…éƒ¨ã®ãƒ€ã‚¤ãƒŠãƒ¢ã‚„ç›´æµç™ºé›»æ©ŸãŒãã®å‹•ãã‚’é›»æ°—ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰æ›ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ç‡ƒæ–™ã‚„é›»æ°—ãªã—ã§äººãŒé›»åŠ›ã‚’ç”Ÿã¿å‡ºã›ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ç·Šæ€¥æ™‚ã‚„å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å­¦ç¿’ã«å½¹ç«‹ã¡ã¾ã™ã€‚">
          A hand crank power generator is a small device that creates electricity by using human mechanical energy. When you turn the crank, the internal mechanism, which is either a dynamo or a DC generator, turns that motion into electrical energy. This demonstrates how people can generate power without fuel or electricity. It is useful for emergencies and for learning about renewable energy.
        </p>

        <div class="section">
          <h2 data-en="How it works" data-ja="ã‚·ã‚¯ãƒŸ">How it works</h2>
          <p data-en="When you turn the crank on a hand crank power generator, your mechanical energy is transferred through a shaft and gearing to a small dynamo or DC generator. The rotating rotor moves inside the stator's coils which induces an electrical current. Many designs include a rectifier or regulator so the output can reliably power small devices or charge a battery." data-ja="ãƒ†ãƒžãƒ¯ã‚·ãƒãƒ„ãƒ‡ãƒ³ã‚­ãƒŽã‚¯ãƒ©ãƒ³ã‚¯ãƒ²ãƒžãƒ¯ã‚¹ã¨ã€ã‚¢ãƒŠã‚¿ãƒŽã‚­ã‚«ã‚¤ãƒ†ã‚­ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ²ã‚·ãƒ£ãƒ•ãƒˆãƒˆã‚®ã‚¢ãƒ²ãƒˆã‚ªã‚·ãƒ†ã‚³ã‚¬ã‚¿ãƒŽãƒ€ã‚¤ãƒŠãƒ¢ãƒ¤ãƒãƒ§ã‚¯ãƒªãƒ¥ã‚¦ãƒãƒ„ãƒ‡ãƒ³ã‚­ãƒ‹ãƒ‡ãƒ³ã‚¿ãƒ„ã‚µãƒ¬ãƒžã‚¹ã€‚ã‚«ã‚¤ãƒ†ãƒ³ã‚¹ãƒ«ãƒ­ãƒ¼ã‚¿ãƒ¼ã‚¬ã‚¹ãƒ†ãƒ¼ã‚¿ãƒ¼ãƒŽã‚³ã‚¤ãƒ«ãƒŠã‚¤ãƒ²ã‚¦ã‚´ã‚­ã€ãƒ‡ãƒ³ãƒªãƒ¥ã‚¦ã‚¬ãƒ¦ã‚¦ãƒ‰ã‚¦ã‚µãƒ¬ãƒžã‚¹ã€‚ã‚ªã‚ªã‚¯ãƒŽã‚»ãƒƒã‚±ã‚¤ãƒ‡ãƒã€ã‚·ãƒ¥ãƒ„ãƒªãƒ§ã‚¯ãƒ²ã‚¢ãƒ³ãƒ†ã‚¤ã‚¹ãƒ«ã‚¿ãƒ¡ãƒ‹ãƒ¬ã‚¯ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¤ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚¬ãƒ•ã‚¯ãƒžãƒ¬ãƒ†ã‚¤ãƒžã‚¹ã€‚">
            When you turn the crank on a hand crank power generator, your mechanical energy is transferred through a shaft and gearing to a small dynamo or DC generator. The rotating rotor moves inside the stator's coils which induces an electrical current. Many designs include a rectifier or regulator so the output can reliably power small devices or charge a battery.
          </p>
        </div>

        <div class="section">
          <h2 data-en="Main components" data-ja="ã‚·ãƒ¥ãƒŠãƒ–ãƒ’ãƒ³">Main components</h2>
          <ul>
            <li data-en="Crank & Handle â€” the user interface that provides manual input energy." data-ja="ã‚¯ãƒ©ãƒ³ã‚¯ï¼†ãƒãƒ³ãƒ‰ãƒ« â€” ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ãƒ†ãƒ‰ã‚¦ãƒ‹ãƒ¥ã‚¦ãƒªãƒ§ã‚¯ãƒ²ãƒ†ã‚¤ã‚­ãƒ§ã‚¦"><strong>Crank & Handle</strong> â€” the user interface that provides manual input energy.</li>
            <li data-en="Gearing / Shaft â€” transfers and, if needed, increases rotation speed to the generator." data-ja="ã‚®ã‚¢ãƒªãƒ³ã‚°ï¼ã‚·ãƒ£ãƒ•ãƒˆ â€” ã‚«ã‚¤ãƒ†ãƒ³ã‚½ã‚¯ãƒ‰ãƒ²ãƒ‡ãƒ³ã‚»ãƒ„ãƒ‹ãƒ‡ãƒ³ã‚»ãƒ„ã‚·ã€ãƒ’ãƒ„ãƒ¨ã‚¦ãƒ‹ã‚ªã‚¦ã‚¸ãƒ†ã‚¾ã‚¦ã‚½ã‚¯"><strong>Gearing / Shaft</strong> â€” transfers and, if needed, increases rotation speed to the generator.</li>
            <li data-en="Dynamo / DC Generator â€” rotor and stator assembly that converts motion into electricity." data-ja="ãƒ€ã‚¤ãƒŠãƒ¢ï¼DCã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ â€” ãƒ­ãƒ¼ã‚¿ãƒ¼ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ãƒ¼ã®ã‚¯ãƒŸã‚¢ãƒ¯ã‚»ã§ãƒ‰ã‚¦ã‚­ã‚’ãƒ‡ãƒ³ã‚­ã«ãƒ˜ãƒ³ã‚«ãƒ³"><strong>Dynamo / DC Generator</strong> â€” rotor and stator assembly that converts motion into electricity.</li>
            <li data-en="Rectifier / Regulator (optional) â€” converts alternating signals to usable DC and stabilizes output." data-ja="ãƒ¬ã‚¯ãƒ†ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ï¼ãƒ¬ã‚®ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ â€” ã‚³ã‚¦ãƒªãƒ¥ã‚¦ãƒ²ãƒãƒ§ã‚¯ãƒªãƒ¥ã‚¦ãƒ‹ãƒ˜ãƒ³ã‚«ãƒ³ã‚·ã€ã‚·ãƒ¥ãƒ„ãƒªãƒ§ã‚¯ãƒ²ã‚¢ãƒ³ãƒ†ã‚¤ã‚«"><strong>Rectifier / Regulator</strong> (optional) â€” converts alternating signals to usable DC and stabilizes output.</li>
            <li data-en="Output Ports / Terminals â€” where you connect devices, batteries, or small loads (sometimes a USB port)." data-ja="ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãƒãƒ¼ãƒˆï¼ã‚¿ãƒ¼ãƒŸãƒŠãƒ« â€” ãƒ‡ãƒã‚¤ã‚¹ã€ãƒãƒƒãƒ†ãƒªãƒ¼ã€ã‚³ã‚¬ã‚¿ãƒ•ã‚«ãƒ²ã‚»ãƒ„ã‚¾ã‚¯ã‚¹ãƒ«ãƒã‚·ãƒ§"><strong>Output Ports / Terminals</strong> â€” where you connect devices, batteries, or small loads (sometimes a USB port).</li>
          </ul>
        </div>

        <div class="section">
          <h2 data-en="Useful for projects" data-ja="ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å½¹ç«‹ã¤ç‚¹">Useful for projects</h2>
          <p data-en="Hand crank generators are ideal for emergency power, off-grid charging, and hands-on learning. They can power small LED lights, charge a phone in a pinch (depending on design), run sensors, or serve as demonstration tools in classrooms to teach energy conversion and renewable concepts." data-ja="ãƒ†ãƒžãƒ¯ã‚·ãƒãƒ„ãƒ‡ãƒ³ã‚­ãƒã€ã‚­ãƒ³ã‚­ãƒ¥ã‚¦ãƒ‡ãƒ³ã‚²ãƒ³ã€ã‚ªãƒ•ã‚°ãƒªãƒƒãƒ‰ã‚¸ãƒ¥ã‚¦ãƒ‡ãƒ³ã€ã‚¸ãƒƒã‚»ãƒ³ãƒ†ã‚­ãƒŠã‚¬ã‚¯ã‚·ãƒ¥ã‚¦ãƒ‹ã‚µã‚¤ãƒ†ã‚­ãƒ‡ã‚¹ã€‚ã‚³ã‚¬ã‚¿LEDãƒ©ã‚¤ãƒˆãƒŽãƒ†ãƒ³ç¯ã€ã‚±ã‚¤ã‚µã‚¯ãƒ‹ãƒ¨ãƒƒãƒ†ãƒã‚±ã‚¤ã‚¿ã‚¤ãƒ‡ãƒ³ãƒ¯ãƒŽã‚¸ãƒ¥ã‚¦ãƒ‡ãƒ³ã€ã‚»ãƒ³ã‚µãƒ¼é§†å‹•ã€ã‚­ãƒ§ã‚¦ã‚·ãƒ„ãƒ‡ãƒŽã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ˜ãƒ³ã‚«ãƒ³ãƒ¤ã‚µã‚¤ã‚»ã‚¤ã‚«ãƒŽã‚¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒŽãƒ‡ãƒ¢ãƒ‹ãƒ„ã‚«ã‚¨ãƒžã‚¹ã€‚">
            Hand crank generators are ideal for emergency power, off-grid charging, and hands-on learning. They can power small LED lights, charge a phone in a pinch (depending on design), run sensors, or serve as demonstration tools in classrooms to teach energy conversion and renewable concepts.
          </p>
        </div>

        <footer>
          Â© <span id="year">2025</span> hand crank power generator
        </footer>
      </div>
    </div>

    <!-- Controls -->
    <div style="text-align:center;margin-top:18px">
      <button id="show-ja" class="btn" data-en="Show Japanese Translation" data-ja="ãƒ‹ãƒ›ãƒ³ã‚´ãƒ’ãƒ§ã‚¦ã‚¸" aria-controls="content">Show Japanese Translation</button>
      <button id="show-en" class="btn secondary" data-en="Show English" style="display:none" aria-controls="content">Show English</button>
    </div>

    <!-- Side button opens separate page -->
    <a id="side-toggle" class="side-toggle" href="Side-Area.html" title="Open side page" aria-label="Open side page">Next</a>

    <script>
      /* ---------------------------
         Robust audio handling + resume
         --------------------------- */
      (function(){
        const audio = document.getElementById('bgMusic');
        const btn = document.getElementById('soundToggle');
        const STORAGE_KEY = 'hc_bg_audio'; // store muted & time

        // Try to restore muted state and currentTime
        try {
          const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
          if (saved.currentTime) audio.currentTime = saved.currentTime;
          if (typeof saved.muted === 'boolean') audio.muted = saved.muted;
        } catch(e){ /* ignore */ }

        // Start playback in a safe way (some browsers require user gesture for unmuted play)
        function startIfNeeded(){
          // play() returns a promise â€” handle gracefully
          audio.play().catch(()=>{ /* autoplay blocked */ });
        }
        startIfNeeded();

        // Update button UI
        function updateBtn(){
          const isMuted = audio.muted || audio.volume === 0;
          btn.textContent = isMuted ? 'ðŸ”‡' : 'ðŸ”Š';
          btn.setAttribute('aria-pressed', String(!isMuted));
        }
        updateBtn();

        // Toggle behaviour: prefer mute/unmute rather than pause so ambient loop continues
        btn.addEventListener('click', () => {
          // If currently muted, try to unmute and ensure play promise resolves
          if (audio.muted){
            audio.muted = false;
            audio.play().catch(()=> {
              // if play blocked, re-mute to avoid silent issues
              audio.muted = true;
            });
          } else {
            audio.muted = true;
          }
          updateBtn();
          // persist
          try {
            localStorage.setItem(STORAGE_KEY, JSON.stringify({ muted: audio.muted, currentTime: audio.currentTime }));
          } catch(e){}
        });

        // periodically save playback time so other pages can resume near current position
        setInterval(() => {
          try {
            localStorage.setItem(STORAGE_KEY, JSON.stringify({ muted: audio.muted, currentTime: audio.currentTime }));
          } catch(e){}
        }, 3000);

        // When unloading, store last position
        window.addEventListener('beforeunload', () => {
          try{
            localStorage.setItem(STORAGE_KEY, JSON.stringify({ muted: audio.muted, currentTime: audio.currentTime }));
          }catch(e){}
        });
      })();

      /* ---------------------------
         Language toggle (robust)
         --------------------------- */
      (function(){
        const btnJa = document.getElementById('show-ja');
        const btnEn = document.getElementById('show-en');
        const STORAGE_LANG = 'hc_lang_pref';

        // Helper: set content for nodes that have data-ja/data-en
        function setLanguage(lang){
          document.querySelectorAll('[data-en]').forEach(el => {
            // prefer to use attribute matching; attributes store small snippets (safe)
            const val = el.getAttribute(lang === 'ja' ? 'data-ja' : 'data-en');
            if (val !== null) {
              // Some elements contain inline tags (e.g., <strong> inside li). In those cases
              // the data attributes usually contain plain text; to avoid losing markup,
              // replace only text nodes when possible. Simpler and safe: set textContent
              // for elements that have no child element nodes; else set innerHTML.
              const hasChildElements = Array.from(el.childNodes).some(n => n.nodeType === Node.ELEMENT_NODE);
              try {
                if (!hasChildElements) el.textContent = val;
                else el.innerHTML = val;
              } catch(e){
                el.textContent = val;
              }
            }
          });

          // Toggle buttons
          if (lang === 'ja') {
            btnJa.style.display = 'none';
            btnEn.style.display = 'inline-block';
          } else {
            btnJa.style.display = 'inline-block';
            btnEn.style.display = 'none';
          }

          // persist selection
          try { localStorage.setItem(STORAGE_LANG, lang); } catch(e){}
        }

        // initialize from storage (default en)
        try {
          const saved = localStorage.getItem(STORAGE_LANG) || 'en';
          if (saved === 'ja') setLanguage('ja');
        } catch(e){}

        btnJa.addEventListener('click', () => setLanguage('ja'));
        btnEn.addEventListener('click', () => setLanguage('en'));
      })();

      /* ---------------------------
         Small accessibility helpers
         --------------------------- */
      (function(){
        // auto update year
        const y = document.getElementById('year');
        if (y) y.textContent = new Date().getFullYear();

        // keyboard support for link that opens Side-Area
        const side = document.getElementById('side-toggle');
        side.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            side.click();
          }
        });
      })();
    </script>
  </body>
</html>
